generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") 
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

// Modèle Utilisateur
model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String?
  password      String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  role      String   @default("USER")

  reservations  Reservation[]
  favorites   Favorite[]
  ratings      Rating[]
}
// Modèle Reservation
model Reservation {
  id          String   @id @default(cuid())
  
  userId      String
  user        User     @relation(fields: [userId], references: [id])
  
  movieId     String
  movieTitle  String
  cinema      String
  showTime    String
  seats       String
  totalPrice  Int
  
  createdAt   DateTime @default(now())
}

// Modèle Favori
model Favorite {
  id        String   @id @default(cuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  movieId   String   
  
  @@unique([userId, movieId])
}
// Modèle notes
model Rating {
  id        String   @id @default(cuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  movieId   String
  score     Int     
  
  @@unique([userId, movieId])
}